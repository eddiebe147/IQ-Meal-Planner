<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Meal Planner</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#8b4513">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>ğŸ½ï¸ Family Meal Planner</h1>
            <p>Your smart kitchen command center</p>
            <div class="header-stats">
                <div class="stat">
                    <span class="stat-value" id="mealsPlanned">0</span>
                    <span class="stat-label">Meals Planned</span>
                </div>
                <div class="stat">
                    <span class="stat-value" id="recipesStored">0</span>
                    <span class="stat-label">Recipes Stored</span>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav-tabs">
            <button class="nav-tab active" onclick="app.showTab('dashboard')" data-tab="dashboard">
                ğŸ“Š Dashboard
            </button>
            <button class="nav-tab" onclick="app.showTab('planning')" data-tab="planning">
                ğŸ“… Planning
            </button>
            <button class="nav-tab" onclick="app.showTab('recipes')" data-tab="recipes">
                ğŸ“š Recipes
            </button>
            <button class="nav-tab" onclick="app.showTab('shopping')" data-tab="shopping">
                ğŸ›’ Shopping
            </button>
            <button class="nav-tab" onclick="app.showTab('schedule')" data-tab="schedule">
                â° Schedule
            </button>
        </nav>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="widget">
                <div class="widget-header">
                    <div class="widget-title">ğŸ¯ This Week Overview</div>
                    <div class="status-badge status-active" id="planStatus">No Plan</div>
                </div>
                <div class="meal-week" id="dashboardMealWeek">
                    <!-- Will be populated by JavaScript -->
                </div>
                <div class="quick-actions">
                    <button class="btn btn-primary" onclick="app.quickPlanWeek()">âš¡ Quick Plan Week</button>
                    <button class="btn btn-secondary" onclick="app.generateShoppingList()">ğŸ›’ Generate Shopping List</button>
                </div>
            </div>

            <div class="widget">
                <div class="widget-header">
                    <div class="widget-title">ğŸ“ˆ Family Stats</div>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalMeals">0</div>
                        <div class="stat-text">Total Meals</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="cookSessions">0</div>
                        <div class="stat-text">Cook Sessions</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="shoppingItems">0</div>
                        <div class="stat-text">Items to Buy</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="estimatedCost">$0</div>
                        <div class="stat-text">Est. Cost</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Meal Planning Tab -->
        <div id="planning" class="tab-content">
            <div class="widget">
                <div class="widget-header">
                    <div class="widget-title">ğŸ“… Weekly Meal Planner</div>
                    <div class="planning-controls">
                        <button class="btn btn-secondary" onclick="app.clearWeekPlan()">ğŸ—‘ï¸ Clear</button>
                        <button class="btn btn-secondary" onclick="app.autoSuggestWeek()">ğŸ¤– Auto-Suggest</button>
                        <button class="btn btn-primary" onclick="app.saveWeekPlan()">ğŸ’¾ Save Plan</button>
                    </div>
                </div>
                <div class="week-navigation">
                    <button class="btn btn-secondary" onclick="app.previousWeek()">â† Previous</button>
                    <span id="currentWeek" class="current-week">This Week</span>
                    <button class="btn btn-secondary" onclick="app.nextWeek()">Next â†’</button>
                </div>
                <div class="meal-week planning-grid" id="planningMealWeek">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Recipe Vault Tab -->
        <div id="recipes" class="tab-content">
            <div class="widget">
                <div class="widget-header">
                    <div class="widget-title">ğŸ“š Recipe Vault</div>
                    <div class="recipe-controls">
                        <input type="search" placeholder="Search recipes..." class="search-input" id="recipeSearch">
                        <button class="btn btn-primary" onclick="app.showAddRecipeForm()">â• Add Recipe</button>
                    </div>
                </div>
                <div class="recipe-grid" id="recipeGrid">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Shopping Tab -->
        <div id="shopping" class="tab-content">
            <div class="widget">
                <div class="widget-header">
                    <div class="widget-title">ğŸ›’ Shopping List</div>
                    <div class="shopping-controls">
                        <button class="btn btn-secondary" onclick="app.optimizeShoppingList()">âš¡ Optimize</button>
                        <button class="btn btn-secondary" onclick="app.exportShoppingList()">ğŸ“„ Export</button>
                        <button class="btn btn-primary" onclick="app.markShoppingComplete()">âœ… Complete</button>
                    </div>
                </div>
                <div class="shopping-summary">
                    <div class="summary-item">
                        <strong id="totalItems">0</strong> items
                    </div>
                    <div class="summary-item">
                        Est. <strong id="totalCost">$0</strong>
                    </div>
                    <div class="summary-item">
                        <strong id="storeCount">0</strong> stores
                    </div>
                </div>
                <div class="shopping-list" id="shoppingList">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Scheduling Tab -->
        <div id="schedule" class="tab-content">
            <div class="widget">
                <div class="widget-header">
                    <div class="widget-title">â° Automated Scheduling</div>
                    <div class="schedule-controls">
                        <button class="btn btn-secondary" onclick="app.editScheduleSettings()">âš™ï¸ Settings</button>
                        <button class="btn btn-primary" onclick="app.testNotifications()">ğŸ”” Test Alerts</button>
                    </div>
                </div>
                <div class="schedule-list" id="scheduleList">
                    <!-- Will be populated by JavaScript -->
                </div>
                <div class="automation-info">
                    <h3>ğŸš€ Automation Status</h3>
                    <div class="automation-grid">
                        <div class="automation-item">
                            <span class="status-dot active"></span>
                            <div>
                                <strong>Smart Notifications</strong>
                                <div class="automation-desc">Browser notifications enabled</div>
                            </div>
                        </div>
                        <div class="automation-item">
                            <span class="status-dot active"></span>
                            <div>
                                <strong>Auto Shopping Lists</strong>
                                <div class="automation-desc">Generated from meal plans</div>
                            </div>
                        </div>
                        <div class="automation-item">
                            <span class="status-dot pending"></span>
                            <div>
                                <strong>Grocery Integration</strong>
                                <div class="automation-desc">Connect your store account</div>
                            </div>
                        </div>
                        <div class="automation-item">
                            <span class="status-dot pending"></span>
                            <div>
                                <strong>Calendar Sync</strong>
                                <div class="automation-desc">Add to Google Calendar</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="recipeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Add Recipe</h2>
                <button class="modal-close" onclick="app.closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Notification System -->
    <div id="notification" class="notification">
        <div class="notification-content">
            <span id="notifIcon">ğŸ””</span>
            <div id="notifText">
                <div id="notifTitle"></div>
                <div id="notifMessage"></div>
            </div>
            <button class="notification-close" onclick="app.hideNotification()">&times;</button>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-spinner">
        <div class="spinner"></div>
        <div>Loading...</div>
    </div>

    <!-- Scripts -->
    <script src="app.js"></script>
    <script src="data.js"></script>
    <script>
        // Initialize app when page loads
        document.addEventListener('DOMContentLoaded', function() {
            app.init();
        });

        // Register service worker for offline functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(function(err) {
                        console.log('ServiceWorker registration failed');
                    });
            });
        }
    </script>
</body>
</html>